<!DOCTYPE html>
<html>
<head>
	<title>streams-example</title>
</head>
<body>
<script type="text/javascript">
fetch('/string.txt').then((res) => {
    const decoder = new TextDecoderStream('utf-8', { ignoreBOM: true });
    const textStream = res.body.pipeThrough(decoder);
    const reader = textStream.getReader();
    const findMatched = () => reader.read().then(({ value, done }) => {
        if (done) {
            console.log("done");
            return false;
        }
        // console.log(value);
        console.log("--------");
        return findMatched();
    });
    return findMatched();
    // console.log("...")
}).then((isMatched) => { 
    console.log(isMatched)
 });
</script>
</body>
</html>