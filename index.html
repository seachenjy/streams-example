<!DOCTYPE html>
<html>
<head>
	<title>streams-example</title>
</head>
<body>
<script type="text/javascript">


function GetDistance2(lat1,lng1,lat2,lng2){
    let jl_jd = 102834.74258026089786013677476285;
    let jl_wd = 111712.69150641055729984301412873;
    a = Math.abs((lat1-lat2)*jl_wd)
    b = Math.abs((lng1-lng2)*jl_jd)
    s = Math.sqrt(a*a+b*b)
    return Math.round(s*10000)/10000
}

/*
给出坐标，随机一个离此坐标最小min米最大max米的另外一个坐标
@param lat 纬度
@param lng 经度
@min 最小米
@max 最大米
*/
function RandGps(lat,lng,min,max){
    let jl_jd = 102834.74258026089786013677476285;
    let jl_wd = 111712.69150641055729984301412873;
    let s = Math.random()*max
    s = s < min ? min : s
    let a = Math.random()*90
    let ab = hypotenuse(s,a)
    let direction = Math.ceil(Math.random()*31)%4
    switch(direction){
        case 0:
        return {
            lat:lat+(ab.b/jl_wd),
            lng:lng+(ab.a/jl_jd)
        }
        // console.log(value);
        console.log("--------");
        return findMatched();
    });
    return findMatched();
    // console.log("...")
}).then((isMatched) => { 
    console.log(isMatched)
 });
</script>
</body>
</html>